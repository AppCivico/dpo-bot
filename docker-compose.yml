version: "3"
services:
  bottender:
    container_name: dpo-bottender
    build:
      context: .
      dockerfile: ./Dockerfile
    restart: unless-stopped
    ports:
      - "1992:5000"
    expose:
      - "1992"
    volumes:
      - .:/home/node/app
      - /home/node/app/node_modules
    # network_mode: "bridge"
  browser:
    container_name: dpo-browser
    build: 
        context: .
        dockerfile: ./src/Dockerfile
    restart: unless-stopped
    ports:
      - "33"
    volumes:
      - .:/home/node/app_browser
      - /home/node/app_browser/node_modules
    network_mode: "bridge"
  proxy:
    container_name: dpo-proxy
    restart: unless-stopped
    build: 
        context: .
        dockerfile: ./proxy/Dockerfile
    ports:
      - "${REACT_APP_PROXY_PORT}:${REDIS_PORT}"
    expose:
      - "${REACT_APP_PROXY_PORT}"
    links:
      - redis
  redis:
    container_name: dpo-redis
    image: 'redis:4-alpine'
    ports:
      - "${REDIS_PORT}:${REDIS_PORT}"
    expose:
      - "${REDIS_PORT}"


